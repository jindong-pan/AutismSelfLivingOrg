<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨å†Œè´¦å· - Peaceful Independence</title>
    <meta name="description" content="åŠ å…¥Peaceful Independenceï¼Œæ³¨å†Œè´¦å·è·å–ä¸ªæ€§åŒ–æ”¯æŒå’ŒæœåŠ¡ã€‚">
    <link rel="stylesheet" href="static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="static/logo-icon.svg">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <img src="static/logo-icon.svg" alt="Peaceful Independence Logo" class="logo-icon-svg">
                <span>Peaceful Independence</span>
            </div>
            <div class="nav-right">
                <div class="language-links">
                    <a href="register-zh.html" class="lang-link">ä¸­æ–‡</a>
                    <span class="lang-separator">|</span>
                    <a href="register-es.html" class="lang-link">EspaÃ±ol</a>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">é¦–é¡µ</a></li>
                    <li><a href="login.html">ç™»å½•</a></li>
                </ul>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Register Section -->
    <section class="auth-section">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <h1>æ³¨å†Œè´¦å·</h1>
                    <p>åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºï¼Œè·å–ä¸ªæ€§åŒ–æ”¯æŒå’ŒæœåŠ¡</p>
                </div>

                <form id="registerForm" class="auth-form">
                    <div class="form-group">
                        <label for="firstName">åå­— *</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>

                    <div class="form-group">
                        <label for="lastName">å§“æ° *</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>

                    <div class="form-group">
                        <label for="email">é‚®ç®±åœ°å€ *</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="password">å¯†ç  *</label>
                        <input type="password" id="password" name="password" required minlength="8">
                        <small class="form-hint">å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦</small>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">ç¡®è®¤å¯†ç  *</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="terms" name="terms" required>
                        <label for="terms" class="checkbox-label">
                            æˆ‘åŒæ„ <a href="#" target="_blank">ä½¿ç”¨æ¡æ¬¾</a> å’Œ <a href="#" target="_blank">éšç§æ”¿ç­–</a>
                        </label>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="newsletter" name="newsletter">
                        <label for="newsletter" class="checkbox-label">
                            è®¢é˜…æˆ‘ä»¬çš„é€šè®¯ï¼Œè·å–æœ€æ–°æ›´æ–°å’Œæ”¯æŒä¿¡æ¯
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">æ³¨å†Œè´¦å·</button>
                </form>

                <div class="auth-footer">
                    <p>å·²ç»æœ‰è´¦å·ï¼Ÿ<a href="login.html">ç«‹å³ç™»å½•</a></p>
                </div>

                <div id="message" class="message" style="display: none;"></div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo">
                        <img src="static/logo-icon.svg" alt="Peaceful Independence Logo" class="logo-icon-svg">
                        <span>Peaceful Independence</span>
                    </div>
                    <p>Relieving Burdens, Enabling Independence</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul>
                        <li><a href="index.html">é¦–é¡µ</a></li>
                        <li><a href="about.html">å…³äºæˆ‘ä»¬</a></li>
                        <li><a href="services.html">æˆ‘ä»¬çš„æœåŠ¡</a></li>
                        <li><a href="contact.html">è”ç³»æˆ‘ä»¬</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>è”ç³»ä¿¡æ¯</h4>
                    <p>ğŸ“§ info@independentspectrum.org</p>
                    <p>ğŸ“± +1 (555) 123-4567</p>
                    <p>ğŸ“ åœ¨çº¿æ”¯æŒæœåŠ¡</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Peaceful Independence. All rights reserved. | Website powered by AI</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script type="module">
        // å¯¼å…¥Firebaseæ¨¡å—
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, updateProfile } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js';

        // Firebaseé…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyDz3DtqF6RuJoKiRfcznepfO5zyXwcKMLc",
            authDomain: "peaceful-independence.firebaseapp.com",
            projectId: "peaceful-independence",
            storageBucket: "peaceful-independence.firebasestorage.app",
            messagingSenderId: "989115528458",
            appId: "1:989115528458:web:36615bf180d2110d1576f3",
            measurementId: "G-30HKN7XFT5"
        };

        // åˆå§‹åŒ–Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // æ³¨å†Œè¡¨å•å¤„ç†
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const termsAccepted = document.getElementById('terms').checked;

            // è¡¨å•éªŒè¯
            if (password !== confirmPassword) {
                showMessage('å¯†ç ä¸åŒ¹é…', 'error');
                return;
            }

            if (!termsAccepted) {
                showMessage('è¯·åŒæ„ä½¿ç”¨æ¡æ¬¾å’Œéšç§æ”¿ç­–', 'error');
                return;
            }

            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                const submitBtn = document.querySelector('button[type="submit"]');
                submitBtn.textContent = 'æ³¨å†Œä¸­...';
                submitBtn.disabled = true;

                // åˆ›å»ºç”¨æˆ·è´¦æˆ·
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // æ›´æ–°ç”¨æˆ·èµ„æ–™
                await updateProfile(user, {
                    displayName: `${firstName} ${lastName}`
                });

                showMessage('æ³¨å†ŒæˆåŠŸï¼æ­£åœ¨è·³è½¬åˆ°ä»ªè¡¨æ¿...', 'success');

                // å»¶è¿Ÿè·³è½¬åˆ°ä»ªè¡¨æ¿
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 2000);

            } catch (error) {
                console.error('æ³¨å†Œé”™è¯¯:', error);
                let errorMessage = 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•';

                switch (error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = 'æ­¤é‚®ç®±å·²è¢«æ³¨å†Œ';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
                        break;
                    case 'auth/weak-password':
                        errorMessage = 'å¯†ç å¼ºåº¦ä¸è¶³';
                        break;
                    case 'auth/network-request-failed':
                        errorMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•';
                        break;
                }

                showMessage(errorMessage, 'error');

                // æ¢å¤æŒ‰é’®çŠ¶æ€
                const submitBtn = document.querySelector('button[type="submit"]');
                submitBtn.textContent = 'æ³¨å†Œè´¦å·';
                submitBtn.disabled = false;
            }
        });

        // æ˜¾ç¤ºæ¶ˆæ¯å‡½æ•°
        function showMessage(message, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = message;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';

            // 3ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }

        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
        auth.onAuthStateChanged((user) => {
            if (user) {
                // ç”¨æˆ·å·²ç™»å½•ï¼Œé‡å®šå‘åˆ°ä»ªè¡¨æ¿
                window.location.href = 'dashboard.html';
            }
        });
    </script>

    <script src="static/script.js"></script>
</body>
</html>
